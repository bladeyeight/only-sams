import mongoose from 'mongoose';
import Review from './src/models/Review';
import dotenv from 'dotenv';
import path from 'path';

// Load environment variables based on NODE_ENV
const envFile = process.env.NODE_ENV === 'production' ? '.env.prod' : '.env.dev';
dotenv.config({ path: path.join(__dirname, 'config', envFile) });

const seedReviews = async () => {
  try {
    // Connect to MongoDB
    await mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/gameReviews');
    console.log('Connected to MongoDB');

    // Create sample reviews
    const reviews = [
      {
        title: "Atomfall",
        type: "Review",
        rating: 9,
        content: "One of the most important questions involved in the history and evolution of video games over the past 20 years is: can we make an open-world version of this game?  In 2017, Zelda: Breath of the Wild took what was the contemporary version of Zelda at that time and reimagined it as a huge open world game that both brought the Zelda franchise into a new era and raised the bar for video games in general.  Similarly, Elden Ring took the tight, medieval corridors of Dark Souls out into an awe inspiring world that defied even the boundaries of imagination.  Surprisingly enough, the popular Resident Evil franchise is one of the few remaining stragglers that has never fully embraced an open world model and that is where Atomfall comes in.  As part of a continuing trend in 2025 for new Bethesda-like open world games, Atomfall by Rebellion Developments is probably the closest thing we have yet to an open world Resident Evil game.  That, along with its groundbreaking new leads system, has resulted in one of the most tense and consistently enthralling experiences of 2025.  Atomfall’s story wastes no time in getting the player into the action.  After a brief slideshow explaining that in 1957 some sort of accident at the Windscale Nuclear plant in Britain has resulted in a huge area around it being cordoned off by the government, our protagonist wakes up inside this quarantine zone with amnesia.  An injured scientist gives us a brief gameplay tutorial and, when we step outside to see the open area surrounding Windscale, a nearby telephone booth rings and a mysterious voice commands that we destroy something named “Oberon”.    When the phone call ends with a click, the railroading is over and the player is left up to their own devices. Do you go left or right?  Do you go into that dark cave or do you go investigate the train station to the north? Similar to Avowed, the world of Atomfall feels like it’s learned from the sins of previous Bethesda RPGs in the past: namely Starfield.  Instead of creating an incomprehensibly large world that can easily give way to emptiness and copy pasted unoriginality, the 5 large areas that make up Atomfalls world feel meticulously curated by the developers to preserve the pacing of the story and make each location feel rewarding to explore.  After solving a puzzle you might uncover a brand new weapon, or you might find a skill book that upgrades you with a brand new skill, or you might uncover a note that gives you a brand new objective for the games lead system.    The lead system is without a doubt the star of the show for Atomfall.  Unlike most games where you might talk to a quest giver and a marker will appear on your map making your destination obvious, in Atomfall you might learn that someone you need to talk to lives in a forest to the north.  With a lot of other games, this might result in frustration as the player has no idea of where to go or what to do, but Atomfall manages to masterfully walk the line between giving the player too much information and too little.  It’s also complemented, not obfuscated, by the freeform nature in which you can choose which way to journey through the games different regions.  You might choose to first hurry to Wyndham village: the main city of the game or you might decide to investigate the strange druids that have taken up residence in the Casterfell woods to the north.  Whichever direction you choose, you will still discover different leads that lead you towards the same strange witch that has been known to brew a useful potion.  In some games,  your character might progress from the first region to the next in chronological order, but after spending some time with Atomfall, it becomes apparent that its world is more similar to an interconnected web that will weave you through each of its different regions repeatedly.  This brings up comparisons between the different segments of the Spencer mansion in Resident Evil 1 or the police station in Resident Evil 2.  No area is a better example of this “ball of string” world design than the Interchange: an underground bunker at the center of all the regions in Atomfall.  I don’t want to spoil anything major about the story, but, as I was sneaking into the Interchange from different entrances, hiding from horrifying monsters in the dark trying to find the key cards to unlock its different doors, it felt like the Interchange was designed by Umbrella in the best ways.    Further comparisons to Resident Evil and the genre of survival horror in general reveal themselves in Atomfall’s combat.  The player does interact with the world from a first person perspective but it is a far cry from something like Call of Duty where countless enemies can be mowed down before your eyes.  The main character is just an average citizen of Great Britain and can only carry a very limited set of items at any given time.  Ammo is scarce, so it is much more preferable to eliminate enemies one by one or completely sneak by them altogether than engage them head on.    When combat does break out and, it often does, it might be better to hit someone with a shovel than waste your precious shotgun ammo.  But all the different types of weapons, melee and otherwise, have a satisfying weight to them that make them exciting to use and fire.  Also, both you and your enemies are downed in just one or two hits.  This gives the combat very high stakes because at any time you know that one more hit might be what you need to achieve victory or spell your defeat.    Atomfall’s biggest divergence from Resident Evil is related to how you upgrade your character.  As you explore the world, you can find books that unlock various skills that you can learn.  One skill, for example, upgrades your weapon accuracy and another makes merchants wares easier to buy.  This second skill is pretty important because merchants carry a lot of important items like special weapons and even the aforementioned skill books.  Since there is no real currency in the game and inventory space is very limited,  I often had to backtrack back and forth ferrying items to the merchants in order to buy what I wanted.  In Resident Evil as the story progresses, it becomes possible to expand your inventory by finding extra packs in the world, so it is puzzling that none of Atomfall’s skill books contain an upgrade for increasing the amount of items you can carry.    This needless backtracking stands out only because, otherwise, Atomfall’s greatest strength is that it truly feels like it respects your time.  Because the lead system presents all of your objectives on the same level (there are no headers on the lead screen that say “Main” or “Side” quest), everything you do feels like you are progressing the main story and, because it is so common for some leads to wrap back around to other leads, in a lot of ways, you actually are progressing the main story with every thing you do.  The sense of mystery surrounding everything similarly makes every discovery feel significant and the life or death nature of the combat carries that significance as well.  This results in a game that effortlessly carried my interest from the moment I started it until I finished it 10 hours later, and it’s definitely a game that shouldn’t be missed in 2025.  ",
        platforms: ["PS5", "PS4", "Xbox Series X/S", "Xbox One", "PC"],
        genre: "Survival Horror",
        releaseDate: new Date('2025-03-27'),
        imageUrls: [],
      }
    ];

    await Review.insertMany(reviews);
    console.log('Sample reviews inserted');

    // Disconnect
    await mongoose.disconnect();
    console.log('Disconnected from MongoDB');
    
  } catch (error) {
    console.error('Error seeding database:', error);
  }
};

seedReviews();